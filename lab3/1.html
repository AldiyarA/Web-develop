<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="1.css">
        <script>
            console.log(2);
            function addContent(input = document.getElementById('input').value){
                console.log(input);
                document.getElementById('input').value = '';
                if (input.trim() === ''){
                    return;
                }
                const list = document.getElementById('list');
                const newTask = document.createElement('div');
                newTask.className = 'task';
                const chBox = document.createElement('div');
                chBox.className = 'checkbox-box';
                const check = document.createElement('input');
                check.type = 'checkbox';
                check.className = 'checkbox';
                const content = document.createElement('div');
                content.className = 'content';
                const text = document.createElement('p');
                text.className = 'text';
                const del = document.createElement('div')
                del.className = 'delete';
                const img = document.createElement('img');
                img.src = 'del.png';
                del.appendChild(img);
                text.appendChild(document.createTextNode(input));
                content.appendChild(text);
                chBox.appendChild(check);
                newTask.appendChild(chBox);
                newTask.appendChild(content);
                newTask.append(del);
                list.appendChild(newTask);
                list.className = 'list';
                if (list.children.length !== 1){
                    newTask.className = list.children[1].className + ' task-with-border';
                }
                saveData();
            }
            function saveData(){
                console.log('saving');
                const tasks = document.getElementById('list');
                localStorage.setItem('myTasks', JSON.stringify(tasks.innerHTML));
            }
        </script>
    </head>
    <body>
        <header><h1>ToDo List</h1></header>
        <main>
            <div id = 'ToDoList' class="ToDoList">
                <h1>ToDo List</h1>
                <div id = 'new-task' class = 'new-task'>
                    <input type="text" id = 'input' class="input" placeholder = 'New Task' autofocus>
                    <button onclick='addContent()' type="button" class="button-1">Add</button>
                </div>
            </div>
            <div id = 'list' class="">
            </div>
        </div>
    </main>
    <footer></footer>
    <script>
        function loadData(){
            const tasks = document.getElementById('list');
            const s = JSON.parse(localStorage.getItem('myTasks'));
            tasks.innerHTML = s;
            if (tasks.children.length !== 0){
                tasks.className = 'list';
            }
            for (let x of tasks.children){
                if (x === undefined) continue;
                try{
                    if (x.children[1].children[0].className === 'text line-cross'){
                        x.children[0].children[0].checked = true;
                    }
                }finally{
                    console.log('a')
                }
            }
        }
        loadData();
    </script>
    <script src="1.js"></script>
</body>
</html>